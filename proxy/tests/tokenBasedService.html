<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">
  <title>Accessing secure ArcGIS Server services</title>
  <link rel="stylesheet" href="//js.arcgis.com/3.8/js/dojo/dijit/themes/claro/claro.css">
  <link rel="stylesheet" href="//js.arcgis.com/3.8/js/esri/css/esri.css">
  <style>
    html, body, #mapCanvas {
      height: 100%; width: 100%;
      margin:0;
      padding-top:4px;
      padding-left:4px;
    }




  </style>

  <script>var dojoConfig = { parseOnLoad: true };</script>
  <script src="//js.arcgis.com/3.8/"></script>
  <script>
    dojo.require("esri.map");
    dojo.require("esri.layers.FeatureLayer");
    dojo.require("esri.IdentityManager");



    dojo.ready(initialize);

    function initialize() {
   

   esri.addProxyRule({   
      urlPrefix: "sampleserver6.arcgisonline.com",    
      proxyUrl: "Enter Proxy Url" 
    });
      // Create map
     var map = new esri.Map("mapCanvas", {
        basemap: "topo",
        center: [-107.394, 37.837],
        zoom: 3,
        slider: false
      });


      //add the secure service - token is required. Credentials for this service are user/user2
      var conditions = new esri.layers.FeatureLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/SaveTheBay/FeatureServer/0",{
        mode:esri.layers.FeatureLayer.MODE_ONDEMAND,
        outFields:["*"]
      });
      map.addLayers([conditions]);

      //resize the info window
      map.infoWindow.resize(200,200);
    }

  </script>
</head>

<body class="claro">

   <div id="mapCanvas" >
   </div>



</body>
</html>
